# テスト項目詳細（何をテストするか）

## 1. 目的
本書は、テストで検証すべき具体的な項目と観点を詳細化します。

## 2. サービス層（AssetService／ConfigService）
### 2.1 デバイス作成
- 必須項目（asset_no）が空の場合のエラー
- 正常系：登録後に list_devices に含まれる
- 状態（state）の保存

### 2.2 ライセンス作成
- 必須項目（license_no / name）が空の場合のエラー
- 正常系：登録後に list_licenses に含まれる
- 状態（state）の保存

### 2.3 構成作成・名称変更
- create_config で config_no が自動採番される
- created_at / updated_at がセットされる
- rename_config で updated_at が更新される

### 2.4 割り当て・解除（デバイス）
- assign_device で構成に追加される
- unassign_device で構成から削除される
- move_device で構成間移動される
- 使用中制約：他構成への再割当が拒否される

### 2.5 割り当て・解除（ライセンス）
- assign_license で構成に追加される
- unassign_license で構成から削除される
- 使用中制約：他構成への再割当が拒否される

## 3. DB 初期化・シード
### 3.1 スキーマ
- devices/licenses/configurations/config_devices/config_licenses の作成
- 追加カラム（license_no, created_at, updated_at）の存在

### 3.2 シード
- テーブルが空の場合のみシード投入
- デバイス／ライセンス／構成のサンプル件数
- 使用中制約を満たす割り当て

## 4. UI（Qt）
### 4.1 構成キャンバス
- ConfigCard の生成数と表示
- 整列：構成番号昇順/降順、作成日/更新日降順
- 選択状態の安定性

### 4.2 アセットパレット（デバイス）
- フィルタ：種別／状態／キーワード
- 既定ソート：資産番号降順
- 使用中：グレー表示・ドラッグ不可・ツールチップ

### 4.3 アセットパレット（ライセンス）
- フィルタ：状態／キーワード
- 既定ソート：ライセンス番号降順
- 使用中：グレー表示・ドラッグ不可・ツールチップ

### 4.4 テーブル設定
- 列幅の ResizeToContents
- 行高さと最小高さの設定

### 4.5 ログ
- 操作ログ（割り当て／解除／整列）
- 競合ログ（使用中制約）

## 5. 起動・インポート
- アプリ起動で例外が発生しない
- 主要モジュールの import が成功する

## 6. 非機能（範囲内）
- UI のオフスクリーン動作
- 例外時のエラーメッセージ表示
